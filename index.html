<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0ea5e9">
    <title>Mixing Fluid Calculator</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 50%, #7dd3fc 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 600px; margin: 0 auto; }
        .header { text-align: center; color: #0c4a6e; margin-bottom: 30px; position: relative; padding-top: 40px; }
        .update-btn {
            position: absolute;
            top: 0;
            left: 0;
            background: #0ea5e9;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
        }
        .update-btn:hover {
            background: #0284c7;
        }
        .page { display: none; }
        .page.active { display: block; }
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        .menu-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 16px;
            padding: 20px;
            cursor: pointer;
            border: 2px solid rgba(186, 230, 253, 0.5);
            text-align: center;
        }
        .menu-card h3 { color: #0369a1; margin-bottom: 0; font-size: 16px; }
        .back-button {
            background: rgba(255, 255, 255, 0.7);
            color: #0369a1;
            border: 2px solid rgba(186, 230, 253, 0.5);
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            margin-bottom: 20px;
        }
        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 24px;
        }
        input, textarea {
            width: 100%;
            padding: 14px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 16px;
            margin-bottom: 16px;
        }
        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 16px;
            background: #f0f9ff;
            border-radius: 10px;
            margin-bottom: 10px;
        }
        .result-value { font-weight: 700; color: #0369a1; }
        table { width: 100%; border-collapse: collapse; font-size: 11px; }
        th, td { padding: 6px; border: 1px solid #e5e7eb; text-align: left; }
        th { background: #0ea5e9; color: white; border-color: #7dd3fc; }
        .version-badge {
            position: fixed;
            bottom: 10px;
            right: 10px;
            background: rgba(255,255,255,0.9);
            color: #6b7280;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
        }
        .update-banner {
            position: fixed;
            top: 10px;
            left: 10px;
            background: #0ea5e9;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            cursor: pointer;
            font-weight: 600;
            font-size: 13px;
        }
        .update-banner:hover {
            background: #0284c7;
        }
    </style>
</head>
<body>
    <div class="version-badge">v1.1.6</div>
    <div class="container">
        <div class="header">
            <button class="update-btn" onclick="updateApp()">üîÑ Update</button>
            <h1>Mixing Fluid Calculator</h1>
        </div>
        
        <div class="page active" id="menu">
            <div class="menu-grid">
                <div class="menu-card" onclick="showPage('increase')"><h3>Increase Mix</h3></div>
                <div class="menu-card" onclick="showPage('decrease')"><h3>Decrease Mix</h3></div>
                <div class="menu-card" onclick="showPage('volume')"><h3>Increase Volume</h3></div>
                <div class="menu-card" onclick="showPage('tote')"><h3>Adding Tote</h3></div>
                <div class="menu-card" onclick="showPage('history')"><h3>üìã History</h3></div>
                <div class="menu-card" onclick="showPage('dilution')"><h3>üìä Dilution Chart</h3></div>
                <div class="menu-card" onclick="showPage('aircraft')"><h3>‚úàÔ∏è Aircraft Reference</h3></div>
                <div class="menu-card" onclick="showPage('airlines')"><h3>üõ´ Airline Codes</h3></div>
                <div class="menu-card" onclick="showPage('notes')"><h3>üìù Notes</h3></div>
            </div>
        </div>

        <div class="page" id="increase">
            <button class="back-button" onclick="showPage('menu')">‚Üê Back</button>
            <div class="card">
                <h2>Increase Mix</h2>
                <input type="number" inputmode="decimal" id="inc-cur" placeholder="Current Mix %" oninput="calcInc()">
                <input type="number" inputmode="decimal" id="inc-des" placeholder="Desired Mix %" oninput="calcInc()">
                <input type="number" inputmode="decimal" id="inc-vol" placeholder="Current Volume" oninput="calcInc()">
                <div id="inc-result"></div>
            </div>
        </div>

        <div class="page" id="decrease">
            <button class="back-button" onclick="showPage('menu')">‚Üê Back</button>
            <div class="card">
                <h2>Decrease Mix</h2>
                <input type="number" inputmode="decimal" id="dec-cur" placeholder="Current Mix %" oninput="calcDec()">
                <input type="number" inputmode="decimal" id="dec-des" placeholder="Desired Mix %" oninput="calcDec()">
                <input type="number" inputmode="decimal" id="dec-vol" placeholder="Current Volume" oninput="calcDec()">
                <div id="dec-result"></div>
            </div>
        </div>

        <div class="page" id="volume">
            <button class="back-button" onclick="showPage('menu')">‚Üê Back</button>
            <div class="card">
                <h2>Increase Volume</h2>
                <input type="number" inputmode="decimal" id="vol-cur" placeholder="Current Mix %" oninput="calcVol()">
                <input type="number" inputmode="decimal" id="vol-curv" placeholder="Current Volume" oninput="calcVol()">
                <input type="number" inputmode="decimal" id="vol-want" placeholder="Wanted Mix %" oninput="calcVol()">
                <input type="number" inputmode="decimal" id="vol-wantv" placeholder="Wanted Volume" oninput="calcVol()">
                <div id="vol-result"></div>
            </div>
        </div>

        <div class="page" id="tote">
            <button class="back-button" onclick="showPage('menu')">‚Üê Back</button>
            <div class="card">
                <h2>Adding Tote</h2>
                <input type="number" inputmode="decimal" id="tote-tm" placeholder="Truck Mix %" oninput="calcTote()">
                <input type="number" inputmode="decimal" id="tote-tv" placeholder="Truck Volume" oninput="calcTote()">
                <input type="number" inputmode="decimal" id="tote-ttm" placeholder="Tote Mix %" oninput="calcTote()">
                <input type="number" inputmode="decimal" id="tote-ttv" placeholder="Tote Volume" oninput="calcTote()">
                <div id="tote-result"></div>
            </div>
        </div>

        <div class="page" id="history">
            <button class="back-button" onclick="showPage('menu')">‚Üê Back</button>
            <div class="card">
                <h2>History</h2>
                <div id="history-list"></div>
                <button onclick="clearHistory()" style="background: #ef4444; color: white; border: none; padding: 10px 20px; border-radius: 8px; margin-top: 12px; cursor: pointer;">Clear</button>
            </div>
        </div>

        <div class="page" id="dilution">
            <button class="back-button" onclick="showPage('menu')">‚Üê Back</button>
            <div class="card">
                <h2>Dilution Chart</h2>
                <div style="overflow-x: auto;"><table><thead><tr><th>Dilution</th><th>Refractive Index</th><th>Freeze Point</th><th>LOUT</th></tr></thead><tbody id="dilution-body"></tbody></table></div>
            </div>
        </div>

        <div class="page" id="aircraft">
            <button class="back-button" onclick="showPage('menu')">‚Üê Back</button>
            <div class="card">
                <h2>Aircraft Reference</h2>
                <div style="overflow-x: auto;"><table><thead><tr><th>Carrier</th><th>Broom</th><th>Hoar</th><th>Type IV</th><th>Specifics</th></tr></thead><tbody id="aircraft-body"></tbody></table></div>
            </div>
        </div>

        <div class="page" id="airlines">
            <button class="back-button" onclick="showPage('menu')">‚Üê Back</button>
            <div class="card">
                <h2>Airline Codes</h2>
                <div style="overflow-x: auto;"><table><thead><tr><th>Airline</th><th>Parent</th><th>Call Sign</th><th>Code</th></tr></thead><tbody id="airlines-body"></tbody></table></div>
            </div>
        </div>

        <div class="page" id="notes">
            <button class="back-button" onclick="showPage('menu')">‚Üê Back</button>
            <div class="card">
                <h2>Notes</h2>
                <textarea id="notes-area" rows="15" placeholder="Type notes..." oninput="saveNotes()"></textarea>
                <div id="notes-status" style="color: #9ca3af; font-size: 13px;">Auto-saved</div>
            </div>
        </div>
    </div>

    <script>
        function showPage(p) {
            document.querySelectorAll('.page').forEach(x => x.classList.remove('active'));
            document.getElementById(p).classList.add('active');
            if(p==='notes')loadNotes();if(p==='history')displayHistory();
            if(p==='dilution')loadDilution();if(p==='aircraft')loadAircraft();if(p==='airlines')loadAirlines();
        }

        function calcInc() {
            const c=parseFloat(document.getElementById('inc-cur').value);
            const d=parseFloat(document.getElementById('inc-des').value);
            const v=parseFloat(document.getElementById('inc-vol').value);
            if(!c||!d||!v){document.getElementById('inc-result').innerHTML='';return;}
            const g=v*((d-c)/(100-d)),t=v+g;
            document.getElementById('inc-result').innerHTML=
                `<div style="background:#f97316;color:white;padding:12px;border-radius:8px;margin-bottom:8px;font-weight:600;text-align:center;">
                    Type I to Add: ${g.toFixed(2)} gal
                </div>
                <div class="result-item"><span>New Total Volume</span><span class="result-value">${t.toFixed(2)} gal</span></div>`;
            saveToHistory('Inc',{c,d,v,g:g.toFixed(2)});
        }

        function calcDec() {
            const c=parseFloat(document.getElementById('dec-cur').value);
            const d=parseFloat(document.getElementById('dec-des').value);
            const v=parseFloat(document.getElementById('dec-vol').value);
            if(!c||!d||!v){document.getElementById('dec-result').innerHTML='';return;}
            const w=v*((c-d)/d),t=v+w;
            document.getElementById('dec-result').innerHTML=
                `<div style="background:#3b82f6;color:white;padding:12px;border-radius:8px;margin-bottom:8px;font-weight:600;text-align:center;">
                    Water to Add: ${w.toFixed(2)} gal
                </div>
                <div class="result-item"><span>New Total Volume</span><span class="result-value">${t.toFixed(2)} gal</span></div>`;
            saveToHistory('Dec',{c,d,v,w:w.toFixed(2)});
        }

        function calcVol() {
            const curMix=parseFloat(document.getElementById('vol-cur').value);
            const curVol=parseFloat(document.getElementById('vol-curv').value);
            const wantMix=parseFloat(document.getElementById('vol-want').value);
            const wantVol=parseFloat(document.getElementById('vol-wantv').value);
            if(!curMix||!curVol||!wantMix||!wantVol){document.getElementById('vol-result').innerHTML='';return;}
            
            // Convert percentages to decimals
            const cm=curMix/100;
            const wm=wantMix/100;
            
            // Column D calculations (Conc)
            const d4=cm*curVol;
            const d5=wm*wantVol;
            const d6=d5-d4;
            
            // Column E calculations (H2O)
            const e4=curVol-d4;
            const e5=wantVol-d5;
            const e6=e5-e4;
            
            // Results
            const percentToAdd=(d6/d5)*100;
            const volumeToAdd=d6+e6;
            const typeIToAdd=d6;
            const waterToAdd=e6;
            
            document.getElementById('vol-result').innerHTML=
                `<div class="result-item"><span>% to Add</span><span class="result-value">${percentToAdd.toFixed(0)}%</span></div>
                <div class="result-item"><span>Volume to Add</span><span class="result-value">${Math.round(volumeToAdd)} gal</span></div>
                <div style="margin-top:16px;">
                    <div style="background:#3b82f6;color:white;padding:12px;border-radius:8px;margin-bottom:8px;font-weight:600;text-align:center;">
                        Water to Add: ${Math.round(waterToAdd)} gal
                    </div>
                    <div style="background:#f97316;color:white;padding:12px;border-radius:8px;font-weight:600;text-align:center;">
                        Type I to Add: ${Math.round(typeIToAdd)} gal
                    </div>
                </div>`;
            saveToHistory('Vol',{curMix,curVol,wantMix,wantVol,vol:Math.round(volumeToAdd),pct:percentToAdd.toFixed(0)});
        }

        function calcTote() {
            const tm=parseFloat(document.getElementById('tote-tm').value)/100;
            const tv=parseFloat(document.getElementById('tote-tv').value);
            const ttm=parseFloat(document.getElementById('tote-ttm').value)/100;
            const ttv=parseFloat(document.getElementById('tote-ttv').value);
            if(!tm||!tv||!ttm||!ttv){document.getElementById('tote-result').innerHTML='';return;}
            const nm=((tv*tm)+(ttv*ttm))/(tv+ttv),t=tv+ttv;
            document.getElementById('tote-result').innerHTML=
                `<div class="result-item"><span>New Mix</span><span class="result-value">${(nm*100).toFixed(2)}%</span></div>
                <div class="result-item"><span>Total</span><span class="result-value">${t.toFixed(2)} gal</span></div>`;
            saveToHistory('Tote',{tm:(tm*100).toFixed(1),ttm:(ttm*100).toFixed(1),nm:(nm*100).toFixed(2)});
        }

        function saveToHistory(t,d) {
            const h=JSON.parse(localStorage.getItem('mixHist')||'[]');
            h.unshift({type:t,data:d,time:new Date().toISOString()});
            if(h.length>50)h.pop();
            localStorage.setItem('mixHist',JSON.stringify(h));
        }

        function displayHistory() {
            const h=JSON.parse(localStorage.getItem('mixHist')||'[]');
            const l=document.getElementById('history-list');
            if(!h.length){l.innerHTML='<p style="color:#9ca3af;padding:40px 20px;text-align:center;">No calculations yet</p>';return;}
            l.innerHTML=h.map(x=>{
                const date=new Date(x.time).toLocaleString();
                let det='';
                if(x.type==='Inc')det=`${x.data.c}% ‚Üí ${x.data.d}% | Add ${x.data.g} gal glycol`;
                else if(x.type==='Dec')det=`${x.data.c}% ‚Üí ${x.data.d}% | Add ${x.data.w} gal water`;
                else if(x.type==='Vol')det=`${x.data.cv} ‚Üí ${x.data.wv} gal | Add ${x.data.t} gal`;
                else if(x.type==='Tote')det=`${x.data.tm}% + ${x.data.ttm}% = ${x.data.nm}%`;
                return `<div style="padding:12px;background:#f0f9ff;border-radius:8px;margin-bottom:8px;">
                    <div style="font-weight:600;color:#0369a1;">${x.type}</div>
                    <div style="font-size:13px;color:#6b7280;">${det}</div>
                    <div style="font-size:11px;color:#9ca3af;">${date}</div></div>`;
            }).join('');
        }

        function clearHistory() {
            if(confirm('Clear all?')){localStorage.removeItem('mixHist');displayHistory();}
        }

        function loadNotes() {
            document.getElementById('notes-area').value=localStorage.getItem('fieldNotes')||'';
        }

        function saveNotes() {
            localStorage.setItem('fieldNotes',document.getElementById('notes-area').value);
            const s=document.getElementById('notes-status');
            s.textContent='Saving...';s.style.color='#0ea5e9';
            setTimeout(()=>{s.textContent='Saved ‚úì';s.style.color='#10b981';
                setTimeout(()=>s.style.color='#9ca3af',2000);},500);
        }

        const dilutionData=[['100%','1.4230-1.4260','DO NOT USE','DO NOT USE'],['90%/10%','1.4156-1.4186','-39¬∞C/-38¬∞F','DO NOT USE'],['80%/20%','1.4079-1.4106','-39¬∞C/-38¬∞F','DO NOT USE'],['70%/30%','1.3996-1.4026','-43¬∞C/-45¬∞F','DO NOT USE'],['65%/35%','1.3953-1.3983','-41.5¬∞C/-43¬∞F','-31¬∞C/-24¬∞F'],['60%/40%','1.3911-1.3941','-40¬∞C/-40¬∞F','-30¬∞C/-22¬∞F'],['59%/41%','1.3905-1.3910','-39¬∞C/-39¬∞F','-29¬∞C/-21¬∞F'],['58%/42%','1.3899-1.3904','-39¬∞C/-38¬∞F','-29¬∞C/-20¬∞F'],['57%/43%','1.3893-1.3898','-38¬∞C/-36¬∞F','-28¬∞C/-18¬∞F'],['56%/44%','1.3886-1.3892','-37¬∞C/-34¬∞F','-27¬∞C/-16¬∞F'],['55%/45%','1.3879-1.3885','-36¬∞C/-32¬∞F','-26¬∞C/-14¬∞F'],['54%/46%','1.3872-1.3878','-34¬∞C/-29¬∞F','-24¬∞C/-11¬∞F'],['53%/47%','1.3865-1.3871','-32¬∞C/-26¬∞F','-22¬∞C/-8¬∞F'],['52%/48%','1.3858-1.3864','-31¬∞C/-23¬∞F','-21¬∞C/-5¬∞F'],['51%/49%','1.3851-1.3857','-29¬∞C/-20¬∞F','-19¬∞C/-2¬∞F'],['50%/50%','1.3820-1.3850','-27¬∞C/-17¬∞F','-17¬∞C/+1¬∞F'],['49%/51%','1.3811-1.3819','-26¬∞C/-15¬∞F','-16¬∞C/+3¬∞F'],['48%/52%','1.3803-1.3810','-25¬∞C/-13¬∞F','-15¬∞C/+5¬∞F'],['47%/53%','1.3795-1.3802','-24¬∞C/-11¬∞F','-14¬∞C/+7¬∞F'],['46%/54%','1.3787-1.3794','-23¬∞C/-9¬∞F','-13¬∞C/+9¬∞F'],['45%/55%','1.3779-1.3786','-22¬∞C/-8¬∞F','-12¬∞C/+10¬∞F'],['44%/56%','1.3771-1.3778','-21¬∞C/-6¬∞F','-11¬∞C/+12¬∞F'],['43%/57%','1.3763-1.3770','-21¬∞C/-5¬∞F','-11¬∞C/+13¬∞F'],['42%/58%','1.3755-1.3762','-19¬∞C/-3¬∞F','-9¬∞C/+15¬∞F'],['41%/59%','1.3747-1.3754','-19¬∞C/-2¬∞F','-9¬∞C/+16¬∞F'],['40%/60%','1.3716-1.3746','-18¬∞C/0¬∞F','-8¬∞C/+18¬∞F'],['39%/61%','1.3707-1.3715','-17¬∞C/+2¬∞F','-7¬∞C/+20¬∞F'],['38%/62%','1.3699-1.3706','-16¬∞C/+3¬∞F','-6¬∞C/+21¬∞F'],['37%/63%','1.3691-1.3698','-15¬∞C/+5¬∞F','-5¬∞C/+23¬∞F'],['36%/64%','1.3682-1.3690','-14¬∞C/+6¬∞F','-4¬∞C/+24¬∞F'],['35%/65%','1.3673-1.3681','-13¬∞C/+7¬∞F','-3¬∞C/+25¬∞F'],['34%/66%','1.3664-1.3672','-13¬∞C/+8¬∞F','-3¬∞C/+26¬∞F'],['33%/67%','1.3655-1.3663','-13¬∞C/+9¬∞F','-3¬∞C/+27¬∞F'],['32%/68%','1.3646-1.3654','-12¬∞C/+10¬∞F','-2¬∞C/+28¬∞F'],['31%/69%','1.3637-1.3645','-12¬∞C/+11¬∞F','-2¬∞C/+29¬∞F'],['30%/70%','1.3606-1.3636','-11¬∞C/+12¬∞F','-1¬∞C/+30¬∞F'],['29%/71%','1.3600-1.3605','-11¬∞C/+12¬∞F','-1¬∞C/+30¬∞F'],['28%/72%','1.3593-1.3599','-11¬∞C/+13¬∞F','-1¬∞C/+31¬∞F'],['27%/73%','1.3587-1.3592','-11¬∞C/+13¬∞F','-1¬∞C/+31¬∞F'],['26%/74%','1.3580-1.3586','-10¬∞C/+14¬∞F','0¬∞C/+32¬∞F'],['25%/75%','1.3573-1.3579','-10¬∞C/+14¬∞F','0¬∞C/+32¬∞F'],['24%/76%','1.3565-1.3573','-9¬∞C/+15¬∞F','+1¬∞C/+33¬∞F'],['23%/77%','1.3557-1.3565','-8¬∞C/+18¬∞F','+2¬∞C/+36¬∞F'],['22%/78%','1.3549-1.3557','-8¬∞C/+18¬∞F','+2¬∞C/+36¬∞F'],['21%/79%','1.3541-1.3549','-7¬∞C/+19¬∞F','+3¬∞C/+37¬∞F'],['20%/80%','1.3511-1.3541','-7¬∞C/+19¬∞F','+3¬∞C/+37¬∞F']];

        const aircraftData=[
            ['Alaska','OK','OK','(W&T) No Type IV on the Vertical Tail','N/A'],
            ['Allegiant','OK','OK','(W&T)','N/A'],
            ['American (AA) "Mainline"','OK','OK','(W&T) if (F) requested Mainline from the engines back','N/A'],
            ['American (AA) "Regionals"','OK','OK','(WTF) ERJ 140/145, E175 (F) if requested from the main cabin door, all others (W&T)','Hand Tactile E140/145 & CRJ200 - (No Forced Air on E140/E145)'],
            ['Air Canada (Jazz)','OK','OK','Advise Start Time of Final Application. No Type IV on the Fuselage','(No use of fluid/air mixture when defrosting or deicing)'],
            ['Delta (DL) "Mainline"','OK','OK','(W&T) only No Type IV on Vertical Tail - Ask Capt if WiFi Antenna is OFF or MUTED.','DL - Ladder Tactile (Plus 10\' Hand) on B717 if requested. Engine Inlets @ Gates on Rear Mounted Engines'],
            ['Delta (DL) Connex','OK','OK','E 145 (WTF), All others see DL/DC Reference Chart - Advise ALL to "Configure flaps prior to Type IV"','DC - Hand Tactile E140/145 & CRJ200 (No Forced Air on E140/145) - Engine Inlets @ Gates on Rear Mounted Engines'],
            ['Delta Endeavor Air (9E) CRJ 700/900','OK','OK','W&T','Forced Air and Fluid Injection Allowed'],
            ['SkyWest (OO) CRJ 200/700/900','OK','OK','ALL CRJ/ERJ = W&T (Overnight Type IV not allowed on any Skywest Aircraft)','Forced Air and Fluid Injection Allowed'],
            ['Republic (YX) ERJ 170/175','OK','OK','ERJ 170/175 = W&T','ERJ 170/175 No Forced Air or Fluid Injection during ERD'],
            ['FedEx (FX)','N/A','OK','(W&T) Unless MD11 (F) from trailing edge of Wings back','Engine Inlet Prep at Cargo Ramp'],
            ['JetBlue (B6)','NO','OK','(W&T) Only','8\' Nozzle Distance'],
            ['Southwest (WN)','NO','OK','(W&T) No Type IV on the winglets or Vertical, if (F) requsrted from behind the main cabin door','N/A'],
            ['Spirit (NK)','NO (MX Only)','OK','(W&T) if (F) requested from the main cabin door back - Ask crew if WiFi is OFF','N/A'],
            ['SunCountry','OK','OK','(W&T) No Type IV if not necessary on the Vertical Tail','Flight Crew can request Type IV on the Vertical Tail'],
            ['United (UAL)','OK','OK','(W&T) No Type IV on Winglets or Vertical','Crew can request Type IV on Fuselage'],
            ['United (UAL) Connex','OK','OK','(W&T) Type IV on Fuselage of E-145','Full Body Type I required on ALL Aircraft. Tactile check required on E-145'],
            ['UPS (5X)','N/A','OK','(W&T) if (F) requested form behind the main cabin door back. (Type IV is required on the fuselage of the MD-11) No Type IV on the Vertical Tail.','UPS Requires Brix and Dew Point (Farenheit) on Deice Logs. Engine Inlet Prep at Cargo Ramp. (No use of Fluid/Air Mixtures when Defrosting or Deicing)'],
            ['MAC','N/A','OK','(WTF)','Deice Engines Off - Gather Gallons Total for Post Readback']
        ];

        const airlinesData=[['Alaska','Alaska Airlines','Alaska','AS'],['Allegiant','Allegiant','Allegiant','G4'],['American','American','American','AA'],['Air Wisconsin','American','Wisconsin','ZW-AA'],['PSA Airlines','American','Blue Streak','OH-AA'],['Republic','American','Brickyard','YX-AA'],['Skywest','American','Skywest','OO-AA'],['Envoy','American','Envoy','MQ-AA'],['Piedmont','American','Piedmont','PT-AA'],['Delta','Delta','Delta','DL'],['Endeavor Air','Delta','Endeavor','9E-DL'],['Skywest','Delta','Skywest','OO-DL'],['Republic','Delta','Brickyard','YX-DL'],['United','United','United','UA'],['Republic','United','Brickyard','YX-UA'],['Mesa','United','Air Shuttle','YV-UA'],['Go-Jet','United','Lindbergh','G7-UA'],['Skywest','United','Skywest','OO-UA'],['CommuteAir','United','CommuteAir','C5-UA'],['Southern Airways','Southern Airways','Friendly','9X'],['JetBlue','JetBlue','JetBlue','B6'],['Southwest','Southwest','Southwest','WN'],['Spirit Airlines','Spirit Airlines','Spirit Wings','NK'],['Breeze Airways','Breeze Airways','Moxy','MX'],['British Airways','British Airways','Speedbird','BA'],['Air Canada','Air Canada','Air Canada','AC'],['Air Canada Express','Air Canada','Jazz','QK'],['Icelandair','Icelandair','Iceair','FI'],['FedEx','FedEx','FedEx','FX'],['Mountain Air Cargo','Mountain Air Cargo','Mountain','K2'],['UPS','UPS','UPS','5X'],['Atlas Air','Atlas Air','Giant','5Y'],['Kalitta Air','Kalitta Air','Connie','K4'],['ATI','ATI Transport Intl','Air Transport','8C'],['Amazon Air','Sun Country','Sun Country','SY'],['US Air Force','US Air Force','Various','USAF'],['PAN-G','PAN-G','Various','PaNG']];

        function loadDilution(){const t=document.getElementById('dilution-body');if(t.innerHTML)return;t.innerHTML=dilutionData.map(r=>`<tr>${r.map((c,i)=>`<td style="background:${i===0?'#f9fafb':'white'};${c.includes('DO NOT USE')?'color:#dc2626;font-weight:600;':''}">${c}</td>`).join('')}</tr>`).join('');}

        function loadAircraft(){const t=document.getElementById('aircraft-body');if(t.innerHTML)return;t.innerHTML=aircraftData.map(r=>`<tr>${r.map((c,i)=>`<td style="background:${i===0?'#f9fafb':'white'};font-size:10px;line-height:1.3;">${c}</td>`).join('')}</tr>`).join('');}

        function loadAirlines(){const t=document.getElementById('airlines-body');if(t.innerHTML)return;t.innerHTML=airlinesData.map(r=>`<tr>${r.map((c,i)=>`<td style="background:${i===0?'#f9fafb':'white'};">${c}</td>`).join('')}</tr>`).join('');}

        // Service Worker
        if('serviceWorker' in navigator){
            window.addEventListener('load',()=>{
                navigator.serviceWorker.register('./service-worker.js')
                .then(reg=>{reg.update();})
                .catch(e=>console.log('SW registration failed:',e));
            });
        }

        function updateApp(){
            if('serviceWorker' in navigator){
                navigator.serviceWorker.getRegistration().then(reg=>{
                    if(reg&&reg.waiting){
                        reg.waiting.postMessage({type:'SKIP_WAITING'});
                    }
                    caches.keys().then(names=>{
                        names.forEach(name=>caches.delete(name));
                    }).then(()=>window.location.reload(true));
                });
            }else{
                window.location.reload(true);
            }
        }
    </script>
</body>
</html>
